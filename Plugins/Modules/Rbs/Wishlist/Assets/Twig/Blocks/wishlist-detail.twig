{% block rbsCatalogProductListUse %}
	{% use 'Rbs_Generic/icon-templates.twig' %}
	{% use 'Rbs_Commerce/icon-templates.twig' %}

	{% use 'Rbs_Catalog/product-directives.twig' %}
	{{ block('rbsCatalogAddToCartPopin') }}
	{{ block('rbsCatalogAddListItemProductToCart') }}

	{% use 'Rbs_Media/media-directives.twig' %}
	{{ block('rbsMediaPictograms') }}
{% endblock rbsCatalogProductListUse %}

{% if unauthorized %}
	<p>{{ i18n('m.rbs.wishlist.front.wishlist_detail_unauthorized') }}</p>
{% else %}
	<div data-ng-show="loading" class="well text-center">
		<p>{{ i18n('m.rbs.wishlist.front.wishlist_please_wait_loading', ['ucf', 'etc']) | raw }}</p>
		<img alt="" src="data:image/gif;base64,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" />
	</div>
	<div data-ng-cloak="" data-ng-hide="loading" data-ng-controller="RbsWishlistDetailCtrl"
		data-ng-init='data = {{ data | json_encode() | raw }}' class="container-fluid">
		<div class="row">
			<div data-ng-hide="changingTitle">
				<h1 class="col-xs-12">
					(= data.title =)
					{% if isUserWishlist %}
						<button type="button" class="btn btn-link" data-ng-click="openChangeTitle()">
							{{ block('rbsGenericIconEdit') }}
							{{ i18n('m.rbs.wishlist.front.wishlist_change_title', ['ucf']) }}
						</button>
						<div class="pull-right">
							<button type="button" class="btn btn-default" data-ng-click="changeIsPublic()">
								{% if data.isPublic %}{{ i18n('m.rbs.wishlist.front.wishlist_set_wishlist_private', ['ucf']) }}
								{% else %}{{ i18n('m.rbs.wishlist.front.wishlist_set_wishlist_public', ['ucf']) }}{% endif %}
							</button>
							<button type="button" class="btn btn-danger" data-ng-click="deleteWishlist('wishlistDeleteModal')">
								{{ block('rbsGenericIconDelete') }}
								{{ i18n('m.rbs.wishlist.front.wishlist_delete_wishlist', ['ucf']) }}
							</button>
						</div>
					{% endif %}
				</h1>
			</div>
			{% if isUserWishlist %}
				<div class="col-md-6" data-ng-show="changingTitle">
					<div data-ng-cloak="" class="input-group">
						<input type="text" class="form-control" data-ng-model="data.title" />
						<span class="input-group-btn">
							<button type="button" class="btn btn-default" data-ng-click="cancelTitleEdition()"
								title="{{ i18n('m.rbs.wishlist.front.cancel_edition', ['ucf']) }}">
								{{ block('rbsGenericIconRemove') }}
							</button>
							<button type="button" class="btn btn-success" data-ng-click="changeTitle()">
								{{ i18n('m.rbs.wishlist.front.wishlist_change_title_ok', ['ucf']) }}
							</button>
						</span>
					</div>
				</div>
			{% endif %}
		</div>
		<div class="row" data-ng-show="errorMessage">
			<div class="col-lg-12">
				<p class="text-danger" data-ng-bind="errorMessage"></p>
			</div>
		</div>
		{% if isUserWishlist and productCountWarning %}
			<div class="row">
				<div class="col-xs-12">
					<p class="text-warning">
						{{ i18n('m.rbs.wishlist.front.wishlist_warning_product_count_limit', ['ucf'], {count: productCountWarning.count, max: productCountWarning.max}) }}
					</p>
				</div>
			</div>
		{% endif %}
		{% if rows | length > 0 %}
			{% block productList %}
			<div class="row product-list">
				{% for row in rows %}
					<div class="col-sm-6 col-lg-4">
						{% include 'Rbs_Catalog/product-list-item.twig' with {'productData': row} %}
						<div class="product-list-selector">
							<label>
								<input type="checkbox" data-ng-model="selectedProducts.{{ row.id }}" />
								{{ i18n('m.rbs.wishlist.front.item_select', ['ucf']) }}
							</label>
						</div>
					</div>
					{% if loop.index % 3 == 0 %}
						<div class="clearfix visible-lg-block one-line-bottom-margin"></div>
					{% endif %}
					{% if loop.index % 2 == 0 %}
						<div class="clearfix visible-sm-block visible-md-block one-line-bottom-margin"></div>
					{% endif %}
				{% endfor %}
			</div>
			{% endblock %}
		{% else %}
			<p>{{ i18n('m.rbs.wishlist.front.wishlist_no_products_in_wishlist', ['ucf']) }}</p>
		{% endif %}
		<div class="row">
			<div class="col-xs-12">
				<button type="button" class="btn btn-primary" data-ng-click="addProductsToCart()">
					{{ i18n('m.rbs.wishlist.front.wishlist_add_selected_products_to_cart', ['ucf']) }}
				</button>
				{% if isUserWishlist %}
					<button type="button" class="btn btn-danger pull-right" data-ng-click="removeSelectedProducts()">
						{{ i18n('m.rbs.wishlist.front.wishlist_remove_selected_products_from_wishlist', ['ucf']) }}
					</button>
				{% endif %}
			</div>
		</div>
		<div class="modal fade" id="wishlistDeleteModal" tabindex="-1" role="dialog"
			aria-labelledby="wishlistDeleteModal" aria-hidden="true">
			<div class="modal-dialog">
				<div class="modal-content">
					<div class="modal-header">
						<button type="button" class="close pull-right" data-dismiss="modal" aria-hidden="true" data-ng-click="reset()">&times;</button>
						<h4 class="modal-title" id="wishlistDelete">
							{{ i18n('m.rbs.wishlist.front.wishlist_delete_modal_title', ['ucf']) }}
						</h4>
					</div>
					<div class="modal-body">
						<div class="modal-main-content">
							<span class="text-danger">{{ i18n('m.rbs.wishlist.front.wishlist_delete_modal_body', ['ucf']) }}</span>
						</div>
					</div>
					<div class="modal-footer">
						<button type="button" class="btn btn-default pull-left" data-dismiss="modal">
							{{ i18n('m.rbs.wishlist.front.wishlist_modal_cancel', ['ucf']) }}</button>
						<button type="button" data-ng-hide="success" class="btn btn-danger" data-ng-click="confirmDeleteWishlist()">
							{{ i18n('m.rbs.wishlist.front.wishlist_modal_delete_confirm', ['ucf']) }}
						</button>
					</div>
				</div>
			</div>
		</div>
		<div class="hidden" data-ng-init="wishlistListUrl = '{{ functionURL('Rbs_Wishlist_WishlistList') }}'"></div>
	</div>
{% endif %}